<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>404 - Page Not Found | AI Test Case Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link rel="shortcut icon" href="/static/assets/images/favicon.png?v={{ timestamp if timestamp else '1' }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            height: 100vh;
            color: #333;
            overflow: hidden;
        }

        /* Navbar styles - matching index.html exactly */
        .navbar {
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 1rem 0;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
        }

        .navbar-brand {
            font-weight: 700;
            color: #4CAA72 !important;
            font-size: 1.5rem;
        }

        .navbar-nav .nav-link {
            color: #1f2937;
            font-weight: 500;
            margin: 0 0.5rem;
            transition: color 0.3s ease;
        }

        .navbar-nav .nav-link:hover {
            color: #4CAA72;
        }

        .navbar-toggler {
            border: none;
            padding: 0.25rem 0.5rem;
        }

        .navbar-toggler:focus {
            box-shadow: none;
        }

        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%2833, 37, 41, 0.75%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
        }

        .user-dropdown {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 6px;
            transition: background-color 0.2s ease;
            user-select: none;
        }

        .user-dropdown:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: #4CAA72;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
        }

        .user-name {
            color: #495057;
            font-weight: 500;
            font-size: 14px;
        }

        .dropdown-arrow {
            color: #6c757d;
            font-size: 12px;
            transition: transform 0.2s ease;
        }

        .user-dropdown.active .dropdown-arrow {
            transform: rotate(180deg);
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            min-width: 160px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.2s ease;
            margin-top: 8px;
        }

        .dropdown-menu.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            display: block;
            padding: 12px 16px;
            color: #495057;
            text-decoration: none;
            transition: background-color 0.2s ease;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            font-size: 14px;
        }

        .dropdown-item:hover {
            background-color: #f8f9fa;
            color: #212529;
        }

        .dropdown-divider {
            height: 1px;
            background-color: #e9ecef;
            margin: 4px 0;
        }

        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: rgba(40, 167, 69, 0.3);
            border-radius: 50%;
            animation: float-particle 15s infinite linear;
        }

        @keyframes float-particle {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        .error-container {
            margin-top: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: calc(100vh - 80px);
            padding: 2rem;
            text-align: center;
            position: relative;
            z-index: 10;
        }

        .error-code {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .error-number {
            font-size: 12rem;
            font-weight: 900;
            color: #1a4a52;
            line-height: 1;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .error-number:hover {
            transform: scale(1.1) rotate(5deg);
            color: #28a745;
            text-shadow: 0 0 20px rgba(40, 167, 69, 0.5);
        }

        .error-number.shake {
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px) rotate(-5deg); }
            75% { transform: translateX(10px) rotate(5deg); }
        }

        .detective-icon {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(40, 167, 69, 0.3);
            animation: float 3s ease-in-out infinite;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .detective-icon::before {
            content: '';
            position: absolute;
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            top: 20px;
            left: 30px;
            animation: shine 2s ease-in-out infinite;
        }

        .detective-icon:hover {
            transform: scale(1.2) rotate(15deg);
            box-shadow: 0 15px 40px rgba(40, 167, 69, 0.5);
        }

        .detective-figure {
            font-size: 4rem;
            color: white;
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .detective-icon:hover .detective-figure {
            transform: scale(1.1);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes shine {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 0.5; }
        }

        .error-message {
            color: #1a4a52;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            max-width: 600px;
            opacity: 0;
            animation: fadeInUp 1s ease 0.5s forwards;
        }

        .error-description {
            color: #6c757d;
            font-size: 1.1rem;
            margin-bottom: 3rem;
            line-height: 1.6;
            max-width: 500px;
            opacity: 0;
            animation: fadeInUp 1s ease 0.7s forwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            opacity: 0;
            animation: fadeInUp 1s ease 0.9s forwards;
        }

        .btn-home {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: bold;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .btn-home:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 35px rgba(40, 167, 69, 0.4);
        }

        .fun-facts {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            max-width: 280px;
            transform: translateX(100%);
            transition: all 0.5s ease;
            cursor: pointer;
            z-index: 1001;
        }

        .fun-facts.show {
            transform: translateX(0);
        }

        .fun-facts h4 {
            color: #1a4a52;
            margin-bottom: 0.5rem;
        }

        .fun-facts p {
            color: #6c757d;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .navbar-brand {
                font-size: 1.25rem;
            }
            
            .navbar-nav {
                text-align: center;
                padding: 1rem 0;
            }
            
            .navbar-nav .nav-link {
                padding: 0.75rem 1rem;
                margin: 0.25rem 0;
            }
            
            .user-info {
                justify-content: center;
                margin-top: 0.5rem;
            }
            
            .user-dropdown {
                justify-content: center;
            }
            
            .dropdown-menu {
                position: static !important;
                transform: none !important;
                box-shadow: none;
                border: 1px solid var(--border-color);
                margin-top: 0.5rem;
            }
            
            .error-number {
                font-size: 8rem;
            }

            .detective-icon {
                width: 120px;
                height: 120px;
            }

            .detective-figure {
                font-size: 3rem;
            }

            .error-code {
                /* flex-direction: column; */
                gap: 1rem;
            }

            .error-message {
                font-size: 1.3rem;
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }

            .btn-home {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }

            .fun-facts {
                position: relative;
                transform: none;
                margin: 2rem auto;
                max-width: 100%;
            }
        }

        /* Cursor trail effect */
        .cursor-trail {
            position: fixed;
            width: 6px;
            height: 6px;
            background: rgba(40, 167, 69, 0.6);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transition: all 0.1s ease;
        }

        @media (max-width: 480px) {
            .error-number {
                font-size: 6rem;
            }

            .detective-icon {
                width: 100px;
                height: 100px;
            }

            .detective-figure {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="bi bi-robot me-2"></i>
                <span class="d-none d-sm-inline">AI Test Case Generator</span>
                <span class="d-inline d-sm-none">AI Test Case</span>
            </a>
            
            <!-- Mobile toggle button -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <!-- Collapsible navbar content -->
            <div class="collapse navbar-collapse" id="navbarNav">
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/">Home</a>
                <a class="nav-link" href="/documentation">Documentation</a>
                <a class="nav-link" href="/signin" id="signinNavLink">Sign In</a>
                <!-- <a class="nav-link" href="/dashboard" id="dashboardNavLink" style="display: none;">Dashboard</a> -->
                <a class="nav-link" href="/analytics" id="analyticsNavLink" style="display: none;">Analytics</a>
                <div class="user-info" id="userInfoNav" style="display: none;">
                    <div class="user-dropdown" onclick="toggleUserDropdown()">
                        <div class="user-avatar" id="userAvatar">
                            <!-- Will be populated with first letter of username -->
                        </div>
                        <span class="user-name d-none d-md-inline" id="userName">User</span>
                        <i class="bi bi-chevron-down dropdown-arrow"></i>
                    </div>
                    <div class="dropdown-menu" id="userDropdownMenu">
                        <a href="/dashboard" class="dropdown-item">
                            <i class="bi bi-speedometer2 me-2"></i>Dashboard
                        </a>
                        <a href="/admin-dashboard" class="dropdown-item" id="adminDashboardLink" style="display: none;">
                            <i class="bi bi-shield-check me-2"></i>Admin Dashboard
                        </a>
                        <div class="dropdown-divider"></div>
                        <button class="dropdown-item" onclick="logout()">
                            <i class="bi bi-box-arrow-right me-2"></i>Logout
                        </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="floating-particles" id="particles"></div>
    
    <main class="error-container">
        <div class="error-code">
            <div class="error-number" id="error1">4</div>
            <div class="detective-icon" id="detective">
                <div class="detective-figure">🔍</div>
            </div>
            <div class="error-number" id="error2">4</div>
        </div>

        <h1 class="error-message">We are sorry, but the page you requested was not found</h1>
        
        <p class="error-description">
            The page you're looking for might have been removed, had its name changed, 
            or is temporarily unavailable. Don't worry, we'll help you find what you need!
        </p>

        <div class="action-buttons">
            <a href="/" class="btn-home" id="homeBtn">
                🏠 Back To Home
            </a>
        </div>
    </main>

    <div class="fun-facts" id="funFacts">
        <h4>Did you know?</h4>
        <p id="factText">404 errors got their name from the room number at CERN where the original web server was located!</p>
    </div>

    <script>
        // Function to check authentication status and update UI - matching index.html exactly
        function checkAuthStatus() {
            const token = localStorage.getItem('authToken');
            const userInfo = localStorage.getItem('userInfo');
            
            // Navbar elements
            const signinNavLink = document.getElementById('signinNavLink');
            const dashboardNavLink = document.getElementById('dashboardNavLink');
            const analyticsNavLink = document.getElementById('analyticsNavLink');
            const userInfoNav = document.getElementById('userInfoNav');
            
            if (token && userInfo) {
                try {
                    const user = JSON.parse(userInfo);
                    
                    // Update navbar for logged-in user
                    if (signinNavLink) signinNavLink.style.display = 'none';
                    if (dashboardNavLink) dashboardNavLink.style.display = 'inline-block';
                    if (analyticsNavLink) analyticsNavLink.style.display = 'inline-block';
                    if (userInfoNav) {
                        userInfoNav.style.display = 'flex';
                        document.getElementById('userName').textContent = user.name;
                        document.getElementById('userAvatar').textContent = user.name.charAt(0).toUpperCase();
                        
                        // Show admin dashboard link if user is admin
                        const adminDashboardLink = document.getElementById('adminDashboardLink');
                        if (adminDashboardLink && user.role === 'admin') {
                            adminDashboardLink.style.display = 'block';
                        }
                    }
                } catch (error) {
                    console.error('Error parsing user info:', error);
                    // Clear invalid data
                    localStorage.removeItem('authToken');
                    localStorage.removeItem('userInfo');
                }
            } else {
                // User not logged in - show sign in button
                // Update navbar for non-logged-in user
                if (signinNavLink) signinNavLink.style.display = 'inline-block';
                if (dashboardNavLink) dashboardNavLink.style.display = 'none';
                if (analyticsNavLink) analyticsNavLink.style.display = 'none';
                if (userInfoNav) userInfoNav.style.display = 'none';
            }
        }

        // Function to toggle user dropdown - matching index.html exactly
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdownMenu');
            const userDropdown = document.querySelector('.user-dropdown');
            
            if (dropdown.classList.contains('show')) {
                dropdown.classList.remove('show');
                userDropdown.classList.remove('active');
            } else {
                dropdown.classList.add('show');
                userDropdown.classList.add('active');
            }
        }

        // Function to close user dropdown
        function closeUserDropdown() {
            const dropdown = document.getElementById('userDropdownMenu');
            const userDropdown = document.querySelector('.user-dropdown');
            
            dropdown.classList.remove('show');
            userDropdown.classList.remove('active');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const userInfo = document.getElementById('userInfoNav');
            const dropdown = document.getElementById('userDropdownMenu');
            const userDropdown = document.querySelector('.user-dropdown');
            
            if (!userInfo.contains(event.target)) {
                dropdown.classList.remove('show');
                userDropdown.classList.remove('active');
            }
        });

        // Initialize auth status check
        document.addEventListener('DOMContentLoaded', function() {
            checkAuthStatus();
        });

        // Logout function
        function logout() {
            // Clear authentication data
            localStorage.removeItem('authToken');
            localStorage.removeItem('userInfo');
            // Redirect to home page
            window.location.href = '/';
        }

        // Create floating particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Cursor trail effect
        const cursors = [];
        function createCursorTrail(e) {
            const cursor = document.createElement('div');
            cursor.className = 'cursor-trail';
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
            document.body.appendChild(cursor);
            cursors.push(cursor);

            setTimeout(() => {
                cursor.style.opacity = '0';
                cursor.style.transform = 'scale(0)';
                setTimeout(() => {
                    if (cursor.parentNode) {
                        cursor.parentNode.removeChild(cursor);
                    }
                    cursors.splice(cursors.indexOf(cursor), 1);
                }, 100);
            }, 200);

            if (cursors.length > 10) {
                const oldCursor = cursors.shift();
                if (oldCursor.parentNode) {
                    oldCursor.parentNode.removeChild(oldCursor);
                }
            }
        }

        // Fun facts
        const facts = [
            "404 errors got their name from the room number at CERN where the original web server was located!",
            "The first website ever created is still online at info.cern.ch",
            "Google's 404 page includes a hidden easter egg game!",
            "404 is the most common HTTP error code on the web",
            "Some websites have made their 404 pages so creative they've become destinations!"
        ];

        let factIndex = 0;

        function showNextFact() {
            const factText = document.getElementById('factText');
            factText.style.opacity = '0';
            setTimeout(() => {
                factText.textContent = facts[factIndex];
                factText.style.opacity = '1';
                factIndex = (factIndex + 1) % facts.length;
            }, 300);
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            
            // Show fun facts after delay
            setTimeout(() => {
                document.getElementById('funFacts').classList.add('show');
            }, 2000);

            // Cycle through facts every 5 seconds
            setInterval(showNextFact, 5000);
        });

        document.addEventListener('mousemove', createCursorTrail);

        // Error number interactions
        document.getElementById('error1').addEventListener('click', function() {
            this.classList.add('shake');
            setTimeout(() => this.classList.remove('shake'), 500);
        });

        document.getElementById('error2').addEventListener('click', function() {
            this.classList.add('shake');
            setTimeout(() => this.classList.remove('shake'), 500);
        });

        // Detective icon interaction
        let detectiveClicks = 0;
        document.getElementById('detective').addEventListener('click', function() {
            detectiveClicks++;
            const figure = this.querySelector('.detective-figure');
            
            if (detectiveClicks === 1) {
                figure.textContent = '🕵️';
            } else if (detectiveClicks === 2) {
                figure.textContent = '💀';
            } else if (detectiveClicks === 3) {
                figure.textContent = '😟';
            } else if (detectiveClicks === 4) {
                figure.textContent = '😩';
            } else if (detectiveClicks === 5) {
                figure.textContent = '😮';
            } else if (detectiveClicks === 6) {
                figure.textContent = '😵';
                this.style.background = 'linear-gradient(135deg, #ff6b6b 0%, #feca57 100%)';
                setTimeout(() => {
                    figure.textContent = '🔍';
                    this.style.background = 'linear-gradient(135deg, #28a745 0%, #20c997 100%)';
                    detectiveClicks = 0;
                }, 2000);
            }
        });

        // Fun facts click interaction
        document.getElementById('funFacts').addEventListener('click', showNextFact);
    </script>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>